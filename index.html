<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Doolin Irish Coast Guard Unit - Latest data for active call out</title>
<style>
body {
font-family: Arial, sans-serif;
background: url('background.jpg') no-repeat center center fixed;
background-size: cover;
margin: 0;
padding: 0;
color: white;
overflow: hidden;
height: 100vh;
display: grid;
grid-template-rows: 1fr auto;
grid-template-areas:
"main"
"ticker";
}
#main {
grid-area: main;
display: grid;
grid-template-columns: 1fr 1fr;
gap: 20px;
padding: 20px;
align-content: start;
}
#weather, #tides {
background: rgba(0, 0, 0, 0.7);
padding: 20px;
border-radius: 10px;
text-align: center;
min-height: 300px;
}
h1, h2 {
font-size: 2rem;
text-shadow: 2px 2px 4px black;
}
.data-item {
font-size: 4rem;
font-weight: bold;
margin: 10px 0;
text-shadow: 2px 2px 4px black;
}
.sub-data {
font-size: 1.5rem;
margin: 5px 0;
}
ul {
font-size: 1.2rem;
list-style: none;
padding: 0;
}
li {
margin: 10px 0;
}
#ticker {
grid-area: ticker;
background: rgba(0, 0, 0, 0.8);
height: 50px;
display: flex;
align-items: center;
padding: 0 20px;
font-size: 1.2rem;
white-space: nowrap;
overflow: hidden;
position: relative;
}
#headline {
animation: scroll 20s linear infinite; /* Optional scroll if long text */
}
@keyframes scroll {
0% { transform: translateX(100%); }
100% { transform: translateX(-100%); }
}
.loading {
font-size: 1.5rem;
color: yellow;
}
.error {
color: red;
font-size: 1.5rem;
}
</style>
</head>
<body>
<div id="main">
<div id="weather">
<h1>Weather - Doolin</h1>
<div id="weather-data" class="loading">Loading...</div>
</div>
<div id="tides">
<h1>Tides - Today</h1>
<div id="tide-data" class="loading">Loading...</div>
</div>
</div>
<div id="ticker">
<div id="headline">SAR Headlines: Active call out in progress - Stand by for updates</div>
</div>

<script>
// Sample SAR headlines - customize this array
const sarHeadlines = [
"SAR Alert: Vessel in distress off Doolin coast - Units deploying",
"Coast Guard Update: All clear on previous incident - Monitor channels",
"Training Exercise: Simulated recovery op in progress - No real emergency",
"Weather Warning: High winds expected - Delay non-essential ops",
"Tide Advisory: Extreme low tide at 00:33 - Adjust plans accordingly",
"Unit Briefing: Next SAR drill scheduled for tomorrow morning"
];
let currentHeadlineIndex = 0;

// Function to rotate headlines
function rotateHeadline() {
const headlineEl = document.getElementById('headline');
headlineEl.textContent = sarHeadlines[currentHeadlineIndex];
currentHeadlineIndex = (currentHeadlineIndex + 1) % sarHeadlines.length;
}
rotateHeadline(); // Initial
setInterval(rotateHeadline, 8000); // Rotate every 8 seconds

// Fetch weather from wttr.in (JSON as text)
function fetchWeather() {
const weatherEl = document.getElementById('weather-data');
fetch('https://wttr.in/Doolin?format=j1')
.then(response => {
if (!response.ok) throw new Error('Network error');
return response.text();
})
.then(data => {
const weather = JSON.parse(data);
const current = weather.current_condition[0];
const area = weather.weather[0].hourly[0]; // Approx for today
weatherEl.innerHTML = `
<div class="data-item">${current.temp_C}°C</div>
<div class="sub-data">Feels like: ${current.FeelsLikeC}°C</div>
<div class="sub-data">Wind: ${current.windspeedKmph} km/h ${current.winddir16Point}</div>
<div class="sub-data">Humidity: ${current.humidity}%</div>
<div class="sub-data">Condition: ${current.weatherDesc[0].value}</div>
`;
})
.catch(error => {
console.error('Weather fetch error:', error);
weatherEl.innerHTML = '<div class="error">Weather data unavailable</div>';
});
}

// Fetch and parse tides from tides4fishing.com (HTML parsing)
function fetchTides() {
const tideEl = document.getElementById('tide-data');
fetch('https://tides4fishing.com/ie/munster/doolin/forecast/tides')
.then(response => {
if (!response.ok) throw new Error('Network error');
return response.text();
})
.then(html => {
const parser = new DOMParser();
const doc = parser.parseFromString(html, 'text/html');
// Assume first day's table is today (starts with current date section)
const tables = doc.querySelectorAll('table'); // Find tide tables
if (tables.length === 0) throw new Error('No tide table found');
const tideTable = tables[0]; // First table for today
const rows = tideTable.querySelectorAll('tr');
let tidesHtml = '<ul>';
let highTides = [], lowTides = [];
rows.forEach((row, index) => {
if (index === 0) return; // Skip header
const cells = row.querySelectorAll('td');
if (cells.length >= 2) {
const time = cells[0].textContent.trim();
const height = cells[1].textContent.trim();
const heightNum = parseFloat(height.replace(' m', ''));
const tideType = heightNum > 2 ? 'High' : 'Low'; // Infer: >2m high for this area
const item = `${tideType} Tide: ${time} - ${height}`;
tidesHtml += `<li>${item}</li>`;
if (tideType === 'High') highTides.push(item);
else lowTides.push(item);
}
});
tidesHtml += '</ul>';
if (highTides.length === 0) throw new Error('No tide data parsed');
tideEl.innerHTML = tidesHtml;
})
.catch(error => {
console.error('Tides fetch error:', error);
tideEl.innerHTML = '<div class="error">Tide data unavailable</div>';
});
}

// Load initial data
fetchWeather();
fetchTides();

// Auto-refresh every 5 minutes
setInterval(() => {
fetchWeather();
fetchTides();
}, 300000); // 5 min
</script>
</body>
</html>
